webpackJsonp([8,12],{1341:function(t,e,a){"use strict";var n=a(0),r=a(18),i=a(1374),o=a(321),c=a(643),s=a(648);a.n(s);a.d(e,"StatsModule",function(){return f});var u=this&&this.__decorate||function(t,e,a,n){var r,i=arguments.length,o=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,a,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(o=(i<3?r(o):i>3?r(e,a,o):r(e,a))||o);return i>3&&o&&Object.defineProperty(e,a,o),o},d=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},p=[{path:"",component:i.a,canActivate:[c.a]}],f=function(){function t(){}return t=u([a.i(n.NgModule)({declarations:[i.a],imports:[r.RouterModule.forChild(p),o.a,s.ChartModule]}),d("design:paramtypes",[])],t)}()},1374:function(t,e,a){"use strict";var n=a(0),r=a(18),i=a(31),o=a(157),c=(a.n(o),a(84)),s=a(57),u=a(118),d=a(651);a.n(d);a.d(e,"a",function(){return l});var p=this&&this.__decorate||function(t,e,a,n){var r,i=arguments.length,o=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,a,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(o=(i<3?r(o):i>3?r(e,a,o):r(e,a))||o);return i>3&&o&&Object.defineProperty(e,a,o),o},f=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(){function t(t,e,a){var n=this;this.store=t,this.route=e,this.tripService=a,this.dummyData={labels:["January","February","March","April","May","June","July"],datasets:[{label:"Dummy Data",backgroundColor:"#42A5F5",borderColor:"#1E88E5",data:[28,48,40,19,86,27,90]}]},this.data=new o.Subject,this.data.subscribe(function(t){n.chart&&t&&setTimeout(function(){return n.chart.refresh()},10)})}return t.prototype.ngOnInit=function(){var t=this;this.subscription=this.route.parent.params.subscribe(function(e){return t.userIndex=e.id}),this.store.dispatch(new s.k(this.userIndex)),this.setInitialGraphData()},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe(),this.data.unsubscribe()},t.prototype.setInitialGraphData=function(){var t=this;this.userTrips$=this.store.select(c.i).do(function(e){if(e&&e.length>0){var a=e[0];t.tripService.get_graph_data_for_trip(a.id).subscribe(function(e){var n={labels:e.labels,datasets:[{label:a.name,backgroundColor:"#42A5F5",borderColor:"#1E88E5",data:e.series}]};t.data.next(n)})}})},t.prototype.getGraphDataForTrip=function(t,e){var a=this;this.tripService.get_graph_data_for_trip(t).subscribe(function(t){var n=a.set_graph_data(e,t.labels,t.series);a.data.next(n)},function(t){alert("Something went wrong")})},t.prototype.set_graph_data=function(t,e,a){return{labels:e,datasets:[{label:t,backgroundColor:"#42A5F5",borderColor:"#1E88E5",data:a}]}},p([a.i(n.ViewChild)("chart"),f("design:type","function"==typeof(e="undefined"!=typeof d.UIChart&&d.UIChart)&&e||Object)],t.prototype,"chart",void 0),t=p([a.i(n.Component)({selector:"tr-stats",template:a(1437),styles:[a(1409)],changeDetection:n.ChangeDetectionStrategy.OnPush}),f("design:paramtypes",["function"==typeof(l="undefined"!=typeof i.a&&i.a)&&l||Object,"function"==typeof(h="undefined"!=typeof r.ActivatedRoute&&r.ActivatedRoute)&&h||Object,"function"==typeof(b="undefined"!=typeof u.a&&u.a)&&b||Object])],t);var e,l,h,b}()},1409:function(t,e){t.exports=""},1437:function(t,e){t.exports='<div class="ui centered grid">\n  <div style="height: 120px; background: gray; width: 100%">\n  </div>\n  <div class="twelve wide column">\n    <!--{{data | async | json}}-->\n    <p-chart #chart type="bar" [data]="(data | async) || dummyData "></p-chart>\n    <table class="ui celled table">\n      <thead>\n        <tr>\n          <th>Trips</th>\n          <th>Views</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr *ngFor="let trip of userTrips$ | async">\n          <td>\n            <a (click)="getGraphDataForTrip(trip.id, trip.name)">{{trip.name}}</a>\n          </td>\n          <td>{{trip.view_count}}</td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</div>'}});
//# sourceMappingURL=8.0562c6e7bcf0b2ee183f.bundle.map