{"version":3,"sources":["webpack:///8.d269f25317e17f105fd2.chunk.js","webpack:///./src/app/components/stats/stats.module.ts","webpack:///./src/app/components/stats/stats.component.ts","webpack:///./src/app/components/stats/stats.component.scss","webpack:///./src/app/components/stats/stats.component.html"],"names":["webpackJsonp","1390","module","exports","__webpack_require__","__WEBPACK_IMPORTED_MODULE_0__angular_core__","__WEBPACK_IMPORTED_MODULE_1__angular_router__","__WEBPACK_IMPORTED_MODULE_2__stats_component__","__WEBPACK_IMPORTED_MODULE_3__shared_index__","__WEBPACK_IMPORTED_MODULE_4__guards_auth_guard__","__WEBPACK_IMPORTED_MODULE_5_primeng_primeng__","n","d","StatsModule","__decorate","this","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__metadata","k","v","metadata","routes","path","component","canActivate","declarations","imports","forChild","1423","__WEBPACK_IMPORTED_MODULE_2__ngrx_store__","__WEBPACK_IMPORTED_MODULE_3_rxjs__","__WEBPACK_IMPORTED_MODULE_4__reducers_index__","__WEBPACK_IMPORTED_MODULE_5__actions_trips_action__","__WEBPACK_IMPORTED_MODULE_6__services_trips_service__","__WEBPACK_IMPORTED_MODULE_7_primeng_components_chart_chart__","StatsComponent","store","route","tripService","_this","dummyData","labels","datasets","label","backgroundColor","borderColor","data","subscribe","response","chart","setTimeout","refresh","prototype","ngOnInit","subscription","parent","params","userIndex","dispatch","setInitialGraphData","ngOnDestroy","unsubscribe","userTrips$","select","do","trips","trip_1","get_graph_data_for_trip","id","temp","name","series","next","getGraphDataForTrip","set_graph_data","err","alert","label_name","_a","selector","template","styles","changeDetection","OnPush","_b","_c","_d","1458","1486"],"mappings":"AAAAA,cAAc,EAAE,KAEVC,KACA,SAASC,EAAQC,EAASC,GAEhC,YACqB,IAAIC,GAA8CD,EAAoB,GAClEE,EAAgDF,EAAoB,IACpEG,EAAiDH,EAAoB,MACrEI,EAA8CJ,EAAoB,KAClEK,EAAmDL,EAAoB,KACvEM,EAAgDN,EAAoB,IACZA,GAAoBO,EAAED,EACxEN,GAAoBQ,EAAET,EAAS,cAAe,WAAa,MAAOU,IACjG,IAAIC,GAAcC,MAAQA,KAAKD,YAAe,SAAUE,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HP,GAAvHQ,EAAIC,UAAUC,OAAQC,EAAIH,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAOK,OAAOC,yBAAyBR,EAAQC,GAAOC,CACrH,IAAuB,gBAAZO,UAAoD,kBAArBA,SAAQC,SAAyBJ,EAAIG,QAAQC,SAASX,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIS,GAAIZ,EAAWM,OAAS,EAAGM,GAAK,EAAGA,KAAShB,EAAII,EAAWY,MAAIL,GAAKH,EAAI,EAAIR,EAAEW,GAAKH,EAAI,EAAIR,EAAEK,EAAQC,EAAKK,GAAKX,EAAEK,EAAQC,KAASK,EAChJ,OAAOH,GAAI,GAAKG,GAAKC,OAAOK,eAAeZ,EAAQC,EAAKK,GAAIA,GAE5DO,EAAcf,MAAQA,KAAKe,YAAe,SAAUC,EAAGC,GACvD,GAAuB,gBAAZN,UAAoD,kBAArBA,SAAQO,SAAyB,MAAOP,SAAQO,SAASF,EAAGC,ICbpGE,IACFC,KAAM,GAAIC,UAAW7B,EAAA,EAAgB8B,aAAc5B,EAAA,KAcvDI,EAAA,mBAAAA,MAA2B,MAX3BA,GAAAC,GAACV,EAAAwB,EAAAvB,EAAA,WACCiC,cAEE/B,EAAA,GAEFgC,SACEjC,EAAA,aAAakC,SAASN,GACtB1B,EAAA,EACAE,EAAA,eD2BIoB,EAAW,yBACZjB,OAOD4B,KACA,SAASvC,EAAQC,EAASC,GAEhC,YACqB,IAAIC,GAA8CD,EAAoB,GAClEE,EAAgDF,EAAoB,IACpEsC,EAA4CtC,EAAoB,IAChEuC,EAAqCvC,EAAoB,KAEzDwC,GAD6CxC,EAAoBO,EAAEgC,GACnBvC,EAAoB,KACpEyC,EAAsDzC,EAAoB,IAC1E0C,EAAwD1C,EAAoB,KAC5E2C,EAA+D3C,EAAoB,IACZA,GAAoBO,EAAEoC,EACvF3C,GAAoBQ,EAAET,EAAS,IAAK,WAAa,MAAO6C,IACvF,IAAIlC,GAAcC,MAAQA,KAAKD,YAAe,SAAUE,EAAYC,EAAQC,EAAKC,GAC7E,GAA2HP,GAAvHQ,EAAIC,UAAUC,OAAQC,EAAIH,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAOK,OAAOC,yBAAyBR,EAAQC,GAAOC,CACrH,IAAuB,gBAAZO,UAAoD,kBAArBA,SAAQC,SAAyBJ,EAAIG,QAAQC,SAASX,EAAYC,EAAQC,EAAKC,OACpH,KAAK,GAAIS,GAAIZ,EAAWM,OAAS,EAAGM,GAAK,EAAGA,KAAShB,EAAII,EAAWY,MAAIL,GAAKH,EAAI,EAAIR,EAAEW,GAAKH,EAAI,EAAIR,EAAEK,EAAQC,EAAKK,GAAKX,EAAEK,EAAQC,KAASK,EAChJ,OAAOH,GAAI,GAAKG,GAAKC,OAAOK,eAAeZ,EAAQC,EAAKK,GAAIA,GAE5DO,EAAcf,MAAQA,KAAKe,YAAe,SAAUC,EAAGC,GACvD,GAAuB,gBAAZN,UAAoD,kBAArBA,SAAQO,SAAyB,MAAOP,SAAQO,SAASF,EAAGC,IE3D1GgB,EAAA,WAoBE,QAAAA,GACUC,EACAC,EACAC,GAvBZ,GAAAC,GAAArC,IAqBYA,MAAAkC,QACAlC,KAAAmC,QACAnC,KAAAoC,cAnBVpC,KAAAsC,WACEC,QAAS,UAAW,WAAY,QAAS,QAAS,MAAO,OAAQ,QACjEC,WAEIC,MAAO,aACPC,gBAAiB,UACjBC,YAAa,UACbC,MAAO,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,OAOrC5C,KAAA4C,KAAO,GAAIhB,GAAA,QAQT5B,KAAK4C,KAAKC,UAAU,SAAAC,GACdT,EAAKU,OAASD,GAChBE,WAAW,WAAM,MAAAX,GAAKU,MAAME,WAAW,MAqE/C,MA/DEhB,GAAAiB,UAAAC,SAAA,cAAAd,GAAArC,IACEA,MAAKoD,aAAepD,KAAKmC,MAAMkB,OAAOC,OAAOT,UAC3C,SAACS,GAAW,MAAAjB,GAAKkB,UAAYD,EAAW,KAE1CtD,KAAKkC,MAAMsB,SAAS,GAAI1B,GAAA,EAAoB9B,KAAKuD,YACjDvD,KAAKyD,uBAGPxB,EAAAiB,UAAAQ,YAAA,WACE1D,KAAKoD,aAAaO,cAClB3D,KAAK4C,KAAKe,eAIZ1B,EAAAiB,UAAAO,oBAAA,cAAApB,GAAArC,IAEEA,MAAK4D,WAAa5D,KAAKkC,MAAM2B,OAAOhC,EAAA,GAAiCiC,GAAG,SAAAC,GACtE,GAAIA,GAASA,EAAMxD,OAAS,EAAG,CAC7B,GAAIyD,GAAOD,EAAM,EACjB1B,GAAKD,YAAY6B,wBAAwBD,EAAKE,IAAIrB,UAAU,SAAAC,GAC1D,GAAIqB,IACF5B,OAAQO,EAASP,OACjBC,WAEIC,MAAOuB,EAAKI,KACZ1B,gBAAiB,UACjBC,YAAa,UACbC,KAAME,EAASuB,SAKrBhC,GAAKO,KAAK0B,KAAKH,SAMvBlC,EAAAiB,UAAAqB,oBAAA,SAAoBL,EAAIE,GAAxB,GAAA/B,GAAArC,IACEA,MAAKoC,YAAY6B,wBAAwBC,GAAIrB,UAC3C,SAAAC,GACE,GAAIqB,GAAO9B,EAAKmC,eAAeJ,EAAMtB,EAASP,OAAQO,EAASuB,OAC/DhC,GAAKO,KAAK0B,KAAKH,IAEjB,SAAAM,GACEC,MAAM,2BAKZzC,EAAAiB,UAAAsB,eAAA,SAAeG,EAAYpC,EAAQK,GACjC,OACEL,OAAQA,EACRC,WAEIC,MAAOkC,EACPjC,gBAAiB,UACjBC,YAAa,UACbC,KAAMA,MA1Fd7C,GAACV,EAAAwB,EAAAvB,EAAA,WAAU,SFsJLyB,EAAW,cAA4M,mBAApL6D,EAAwF,mBAA5E5C,GAAsE,SAAqBA,EAAsE,UAAqB4C,GAAOnE,SAC7OwB,EAAeiB,UAAW,QAAS,QE/J1CjB,EAAAlC,GAACV,EAAAwB,EAAAvB,EAAA,YACCuF,SAAU,WACVC,SAAAzF,EAAA,MACA0F,QAAA1F,EAAA,OACA2F,gBAAiB1F,EAAA,wBAAwB2F,SFmKnClE,EAAW,qBAAyL,mBAA1JmE,EAA2E,mBAA/DvD,GAAyD,GAAqBA,EAAyD,IAAqBuD,GAAOzE,OAAqL,mBAApK0E,EAAgF,mBAApE5F,GAA8D,gBAAqBA,EAA8D,iBAAqB4F,GAAO1E,OAAiN,mBAAhM2E,EAA8F,mBAAlFrD,GAA4E,GAAqBA,EAA4E,IAAqBqD,GAAO3E,UAC1oBwB,EAEH,IAAI2C,GAAIM,EAAIC,EAAIC,MAMdC,KACA,SAASlG,EAAQC,GG7LvBD,EAAAC,QAAA,IHmMMkG,KACA,SAASnG,EAAQC,GIpMvBD,EAAAC,QAAA","file":"8.d269f25317e17f105fd2.chunk.js","sourcesContent":["webpackJsonp([8,12],{\n\n/***/ 1390:\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_router__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__stats_component__ = __webpack_require__(1423);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__shared_index__ = __webpack_require__(321);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__guards_auth_guard__ = __webpack_require__(668);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_primeng_primeng__ = __webpack_require__(673);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_primeng_primeng___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_primeng_primeng__);\n/* harmony export (binding) */ __webpack_require__.d(exports, \"StatsModule\", function() { return StatsModule; });\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\n\n\n\n\n\n\nvar routes = [\n    { path: '', component: __WEBPACK_IMPORTED_MODULE_2__stats_component__[\"a\" /* StatsComponent */], canActivate: [__WEBPACK_IMPORTED_MODULE_4__guards_auth_guard__[\"a\" /* CanActivateViaAuthGuard */]] }\n];\nvar StatsModule = (function () {\n    function StatsModule() {\n    }\n    StatsModule = __decorate([\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__angular_core__[\"NgModule\"])({\n            declarations: [\n                // components\n                __WEBPACK_IMPORTED_MODULE_2__stats_component__[\"a\" /* StatsComponent */]\n            ],\n            imports: [\n                __WEBPACK_IMPORTED_MODULE_1__angular_router__[\"RouterModule\"].forChild(routes),\n                __WEBPACK_IMPORTED_MODULE_3__shared_index__[\"a\" /* SharedModule */],\n                __WEBPACK_IMPORTED_MODULE_5_primeng_primeng__[\"ChartModule\"]\n            ]\n        }), \n        __metadata('design:paramtypes', [])\n    ], StatsModule);\n    return StatsModule;\n}());\n//# sourceMappingURL=/home/zeus/work/travel-app-frontend/src/stats.module.js.map\n\n/***/ },\n\n/***/ 1423:\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_router__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ngrx_store__ = __webpack_require__(31);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs__ = __webpack_require__(157);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_rxjs__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__reducers_index__ = __webpack_require__(84);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__actions_trips_action__ = __webpack_require__(56);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__services_trips_service__ = __webpack_require__(119);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_primeng_components_chart_chart__ = __webpack_require__(676);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_primeng_components_chart_chart___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_primeng_components_chart_chart__);\n/* harmony export (binding) */ __webpack_require__.d(exports, \"a\", function() { return StatsComponent; });\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\n\n\n\n\n\n\n\n\nvar StatsComponent = (function () {\n    function StatsComponent(store, route, tripService) {\n        var _this = this;\n        this.store = store;\n        this.route = route;\n        this.tripService = tripService;\n        this.dummyData = {\n            labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],\n            datasets: [\n                {\n                    label: \"Dummy Data\",\n                    backgroundColor: '#42A5F5',\n                    borderColor: '#1E88E5',\n                    data: [28, 48, 40, 19, 86, 27, 90]\n                }\n            ]\n        };\n        this.data = new __WEBPACK_IMPORTED_MODULE_3_rxjs__[\"Subject\"]();\n        this.data.subscribe(function (response) {\n            if (_this.chart && response) {\n                setTimeout(function () { return _this.chart.refresh(); }, 10);\n            }\n        });\n    }\n    StatsComponent.prototype.ngOnInit = function () {\n        var _this = this;\n        this.subscription = this.route.parent.params.subscribe(function (params) { return _this.userIndex = params['id']; });\n        this.store.dispatch(new __WEBPACK_IMPORTED_MODULE_5__actions_trips_action__[\"k\" /* LoadUserTripsAction */](this.userIndex));\n        this.setInitialGraphData();\n    };\n    StatsComponent.prototype.ngOnDestroy = function () {\n        this.subscription.unsubscribe();\n        this.data.unsubscribe();\n    };\n    StatsComponent.prototype.setInitialGraphData = function () {\n        var _this = this;\n        /**Set Graph Data for First Trip */\n        this.userTrips$ = this.store.select(__WEBPACK_IMPORTED_MODULE_4__reducers_index__[\"i\" /* getUserTripsCollection */]).do(function (trips) {\n            if (trips && trips.length > 0) {\n                var trip_1 = trips[0];\n                _this.tripService.get_graph_data_for_trip(trip_1.id).subscribe(function (response) {\n                    var temp = {\n                        labels: response.labels,\n                        datasets: [\n                            {\n                                label: trip_1.name,\n                                backgroundColor: '#42A5F5',\n                                borderColor: '#1E88E5',\n                                data: response.series\n                            }\n                        ]\n                    };\n                    // Service call end\n                    _this.data.next(temp);\n                });\n            }\n        });\n    };\n    StatsComponent.prototype.getGraphDataForTrip = function (id, name) {\n        var _this = this;\n        this.tripService.get_graph_data_for_trip(id).subscribe(function (response) {\n            var temp = _this.set_graph_data(name, response.labels, response.series);\n            _this.data.next(temp);\n        }, function (err) {\n            alert(\"Something went wrong\");\n        });\n    };\n    /**Sets Graph Data */\n    StatsComponent.prototype.set_graph_data = function (label_name, labels, data) {\n        return {\n            labels: labels,\n            datasets: [\n                {\n                    label: label_name,\n                    backgroundColor: '#42A5F5',\n                    borderColor: '#1E88E5',\n                    data: data\n                }\n            ]\n        };\n    };\n    __decorate([\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__angular_core__[\"ViewChild\"])(\"chart\"), \n        __metadata('design:type', (typeof (_a = typeof __WEBPACK_IMPORTED_MODULE_7_primeng_components_chart_chart__[\"UIChart\"] !== 'undefined' && __WEBPACK_IMPORTED_MODULE_7_primeng_components_chart_chart__[\"UIChart\"]) === 'function' && _a) || Object)\n    ], StatsComponent.prototype, \"chart\", void 0);\n    StatsComponent = __decorate([\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__angular_core__[\"Component\"])({\n            selector: 'tr-stats',\n            template: __webpack_require__(1486),\n            styles: [__webpack_require__(1458)],\n            changeDetection: __WEBPACK_IMPORTED_MODULE_0__angular_core__[\"ChangeDetectionStrategy\"].OnPush\n        }), \n        __metadata('design:paramtypes', [(typeof (_b = typeof __WEBPACK_IMPORTED_MODULE_2__ngrx_store__[\"a\" /* Store */] !== 'undefined' && __WEBPACK_IMPORTED_MODULE_2__ngrx_store__[\"a\" /* Store */]) === 'function' && _b) || Object, (typeof (_c = typeof __WEBPACK_IMPORTED_MODULE_1__angular_router__[\"ActivatedRoute\"] !== 'undefined' && __WEBPACK_IMPORTED_MODULE_1__angular_router__[\"ActivatedRoute\"]) === 'function' && _c) || Object, (typeof (_d = typeof __WEBPACK_IMPORTED_MODULE_6__services_trips_service__[\"a\" /* TripsService */] !== 'undefined' && __WEBPACK_IMPORTED_MODULE_6__services_trips_service__[\"a\" /* TripsService */]) === 'function' && _d) || Object])\n    ], StatsComponent);\n    return StatsComponent;\n    var _a, _b, _c, _d;\n}());\n//# sourceMappingURL=/home/zeus/work/travel-app-frontend/src/stats.component.js.map\n\n/***/ },\n\n/***/ 1458:\n/***/ function(module, exports) {\n\nmodule.exports = \"\"\n\n/***/ },\n\n/***/ 1486:\n/***/ function(module, exports) {\n\nmodule.exports = \"<div class=\\\"ui centered grid\\\">\\n  <div style=\\\"height: 120px; background: gray; width: 100%\\\">\\n  </div>\\n  <div class=\\\"twelve wide column\\\">\\n    <!--{{data | async | json}}-->\\n    <p-chart #chart type=\\\"bar\\\" [data]=\\\"(data | async) || dummyData \\\"></p-chart>\\n    <table class=\\\"ui celled table\\\">\\n      <thead>\\n        <tr>\\n          <th>Trips</th>\\n          <th>Views</th>\\n        </tr>\\n      </thead>\\n      <tbody>\\n        <tr *ngFor=\\\"let trip of userTrips$ | async\\\">\\n          <td>\\n            <a (click)=\\\"getGraphDataForTrip(trip.id, trip.name)\\\">{{trip.name}}</a>\\n          </td>\\n          <td>{{trip.view_count}}</td>\\n        </tr>\\n      </tbody>\\n    </table>\\n  </div>\\n</div>\"\n\n/***/ }\n\n});\n\n\n// WEBPACK FOOTER //\n// 8.d269f25317e17f105fd2.chunk.js","// Inbuilt Angular Modules\nimport { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { StatsComponent } from './stats.component';\nimport { SharedModule } from '../../shared/index';\nimport { CanActivateViaAuthGuard } from './../../guards/auth.guard';\nimport { ChartModule } from 'primeng/primeng';\n\nconst routes: Routes = [\n  { path: '', component: StatsComponent, canActivate: [CanActivateViaAuthGuard] }\n];\n\n@NgModule({\n  declarations: [\n    // components\n    StatsComponent\n  ],\n  imports: [\n    RouterModule.forChild(routes),\n    SharedModule,\n    ChartModule\n  ]\n})\nexport class StatsModule { }\n\n\n// WEBPACK FOOTER //\n// ./src/app/components/stats/stats.module.ts","import { Component, OnInit, OnDestroy, ChangeDetectionStrategy, ViewChild } from '@angular/core';\nimport { Response } from '@angular/http';\nimport { ActivatedRoute } from '@angular/router';\nimport { Subscription } from 'rxjs/Rx';\nimport { Store } from '@ngrx/store';\nimport { Observable, Subject } from 'rxjs';\nimport * as fromRoot from './../../reducers/index';\nimport { LoadUserTripsAction } from './../../actions/trips.action';\nimport { Trip } from './../../models/trip';\nimport { TripsService } from './../../services/trips.service';\nimport { UIChart } from \"primeng/components/chart/chart\";\n\n@Component({\n  selector: 'tr-stats',\n  templateUrl: './stats.component.html',\n  styleUrls: ['./stats.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class StatsComponent implements OnInit, OnDestroy {\n\n  @ViewChild(\"chart\") chart: UIChart;\n\n  dummyData = {\n    labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],\n    datasets: [\n      {\n        label: \"Dummy Data\",\n        backgroundColor: '#42A5F5',\n        borderColor: '#1E88E5',\n        data: [28, 48, 40, 19, 86, 27, 90]\n      }\n    ]\n  }\n  private subscription: Subscription;\n  userTrips$: Observable<Trip[]>;\n  userIndex: string;\n  data = new Subject();\n\n  constructor(\n    private store: Store<fromRoot.State>,\n    private route: ActivatedRoute,\n    private tripService: TripsService\n  ) {\n\n    this.data.subscribe(response => {\n      if (this.chart && response) {\n        setTimeout(() => this.chart.refresh(), 10);\n      }\n    })\n  }\n\n\n  ngOnInit() {\n    this.subscription = this.route.parent.params.subscribe(\n      (params) => this.userIndex = params['id']\n    )\n    this.store.dispatch(new LoadUserTripsAction(this.userIndex));\n    this.setInitialGraphData();\n  }\n\n  ngOnDestroy() {\n    this.subscription.unsubscribe();\n    this.data.unsubscribe();\n  }\n\n\n  setInitialGraphData() {\n    /**Set Graph Data for First Trip */\n    this.userTrips$ = this.store.select(fromRoot.getUserTripsCollection).do(trips => {\n      if (trips && trips.length > 0) {\n        let trip = trips[0];\n        this.tripService.get_graph_data_for_trip(trip.id).subscribe(response => {\n          let temp = {\n            labels: response.labels,\n            datasets: [\n              {\n                label: trip.name,\n                backgroundColor: '#42A5F5',\n                borderColor: '#1E88E5',\n                data: response.series\n              }\n            ]\n          }\n          // Service call end\n          this.data.next(temp);\n        })\n      }\n    })\n  }\n\n  getGraphDataForTrip(id, name) {\n    this.tripService.get_graph_data_for_trip(id).subscribe(\n      response => {\n        let temp = this.set_graph_data(name, response.labels, response.series);\n        this.data.next(temp)\n      },\n      err => {\n        alert(\"Something went wrong\");\n      })\n  }\n\n  /**Sets Graph Data */\n  set_graph_data(label_name, labels, data) {\n    return {\n      labels: labels,\n      datasets: [\n        {\n          label: label_name,\n          backgroundColor: '#42A5F5',\n          borderColor: '#1E88E5',\n          data: data\n        }\n      ]\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/components/stats/stats.component.ts","module.exports = \"\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/components/stats/stats.component.scss\n// module id = 1458\n// module chunks = 8","module.exports = \"<div class=\\\"ui centered grid\\\">\\n  <div style=\\\"height: 120px; background: gray; width: 100%\\\">\\n  </div>\\n  <div class=\\\"twelve wide column\\\">\\n    <!--{{data | async | json}}-->\\n    <p-chart #chart type=\\\"bar\\\" [data]=\\\"(data | async) || dummyData \\\"></p-chart>\\n    <table class=\\\"ui celled table\\\">\\n      <thead>\\n        <tr>\\n          <th>Trips</th>\\n          <th>Views</th>\\n        </tr>\\n      </thead>\\n      <tbody>\\n        <tr *ngFor=\\\"let trip of userTrips$ | async\\\">\\n          <td>\\n            <a (click)=\\\"getGraphDataForTrip(trip.id, trip.name)\\\">{{trip.name}}</a>\\n          </td>\\n          <td>{{trip.view_count}}</td>\\n        </tr>\\n      </tbody>\\n    </table>\\n  </div>\\n</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/components/stats/stats.component.html\n// module id = 1486\n// module chunks = 8"],"sourceRoot":""}